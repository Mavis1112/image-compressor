# 首页模块说明文档

## 功能概述
图片压缩工具的主页面，提供图片上传、压缩和下载等核心功能。

## 目录结构
src/views/home/
├── components/          # 页面级组件
│   ├── ImageUploader/  # 图片上传组件
│   ├── CompressOptions/# 压缩选项组件
│   └── ImagePreview/   # 图片预览组件
├── index.vue           # 首页主文件
└── README.md          # 说明文档

## 组件说明

### 1. index.vue（首页主组件）
- 负责整体布局
- 管理组件间通信
- 处理全局状态

### 2. ImageUploader（图片上传组件）
- 支持拖拽上传
- 支持点击上传
- 文件类型验证
- 上传状态提示

### 3. CompressOptions（压缩选项组件）
- 压缩质量设置
- 尺寸限制设置
- 参数实时预览
- 一键重置

### 4. ImagePreview（图片预览组件）
- 原图预览
- 压缩后预览
- 压缩率显示
- 文件信息展示

## 数据流转
1. 图片上传流程
   - 用户选择图片
   - 验证文件类型和大小
   - 显示原图预览
   - 触发压缩流程

2. 压缩处理流程
   - 获取压缩参数
   - 执行压缩操作
   - 更新压缩预览
   - 生成下载链接

3. 状态管理
   - 当前图片信息
   - 压缩参数状态
   - 处理进度状态
   - 错误状态管理

## 接口定义

### 组件属性

#### ImageUploader
props: {
  // 允许的文件类型
  acceptTypes: {
    type: Array,
    default: () => ['image/jpeg', 'image/png']
  },
  // 文件大小限制（MB）
  maxSize: {
    type: Number,
    default: 10
  }
}

#### CompressOptions
props: {
  // 默认压缩质量
  defaultQuality: {
    type: Number,
    default: 80
  },
  // 默认最大宽度
  defaultMaxWidth: {
    type: Number,
    default: 1920
  },
  // 默认最大高度
  defaultMaxHeight: {
    type: Number,
    default: 1080
  }
}

#### ImagePreview
props: {
  // 原始图片
  originalImage: {
    type: [File, String],
    default: ''
  },
  // 压缩后图片
  compressedImage: {
    type: [File, String],
    default: ''
  }
}

### 事件定义

#### ImageUploader
- @file-selected: 选择文件后触发
- @file-error: 文件验证失败时触发

#### CompressOptions
- @options-change: 压缩参数变更时触发
- @compress-start: 开始压缩时触发

#### ImagePreview
- @download: 点击下载时触发

## 注意事项
1. 性能优化
   - 大文件处理
   - 压缩过程优化
   - 内存管理

2. 错误处理
   - 文件类型验证
   - 大小限制检查
   - 压缩失败处理

3. 用户体验
   - 加载状态提示
   - 进度反馈
   - 错误提示

## 设计考虑要点

### 1. 用户体验流程
#### 1.1 核心流程
- 图片选择/拖拽上传
- 压缩参数调整
- 预览效果对比
- 确认并下载

#### 1.2 交互反馈
- 上传进度提示
- 压缩进度显示
- 参数调整实时预览
- 错误提示和处理

#### 1.3 异常处理
- 文件类型不支持
- 文件大小超限
- 压缩过程失败
- 网络异常处理

### 2. 技术实现重点
#### 2.1 性能优化
- 使用 Web Workers 处理压缩
- 大文件分片处理
- 内存使用优化
- 缓存机制实现

#### 2.2 兼容性处理
- 主流浏览器支持
- 移动端适配
- 触摸事件支持
- 降级方案准备

#### 2.3 图片处理
- 格式支持 (JPEG/PNG)
- 压缩质量控制
- 尺寸调整算法
- 元数据处理

### 3. 界面交互设计
#### 3.1 布局规划
- 左侧上传区域
- 右侧控制面板
- 底部预览区域
- 响应式适配

#### 3.2 视觉反馈
- 拖拽区域高亮
- 进度条动画
- 加载状态显示
- 成功/失败提示

#### 3.3 操作优化
- 快捷键支持
- 拖拽交互
- 一键重置
- 批量操作准备

### 4. 数据管理
#### 4.1 状态管理
- 当前图片信息
- 压缩参数状态
- 处理进度状态
- 历史记录状态

#### 4.2 数据流转
- 组件间通信方案
- 父子组件传值
- 事件总线设计
- Vuex状态设计

#### 4.3 数据持久化
- 参数配置保存
- 历史记录存储
- 本地缓存策略
- 清理机制

## 开发优先级
### 第一阶段（核心功能）
1. 基础上传功能
2. 简单压缩功能
3. 基础预览功能
4. 下载功能

### 第二阶段（体验优化）
1. 拖拽上传
2. 进度提示
3. 参数记忆
4. 错误处理

### 第三阶段（功能完善）
1. 批量处理
2. 高级选项
3. 数据统计
4. 移动适配

## 技术依赖
- Vue 2.x
- Element UI
- browser-image-compression
- file-saver